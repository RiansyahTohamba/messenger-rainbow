!function(e){"use strict";var n=".nanobar{width:100%;height:4px;z-index:9999;top:0}.bar{width:0;height:100%;transition:height .3s;background:#000}";function i(e,n){e.classList?e.classList.add(n):e.className+=" "+n}function o(e){e=e||{};var o,r=document.createElement("div"),t={el:r,go:function(e){o(e),100===e&&s()}};function a(e){r.removeChild(e)}function s(){var e=function(e){var n=document.createElement("div"),o=0,r=0,t=0,a={el:n,go:d};function s(){var i=o-r;i<.1&&i>-.1?(f(r),t=0,100===o&&(n.style.height=0,setTimeout(function(){e(n)},300))):(f(o-i/4),setTimeout(d,16))}function f(e){o=e,n.style.width=o+"%"}function d(e){e>=0?(r=e,t||(t=1,s())):t&&s()}return i(n,"bar"),a}(a);r.appendChild(e.el),o=e.go}return function(){var e=document.getElementById("nanobarcss");if(null===e){if((e=document.createElement("style")).type="text/css",e.id="nanobarcss",document.head.insertBefore(e,document.head.firstChild),!e.styleSheet)return e.appendChild(document.createTextNode(n));e.styleSheet.cssText=n}}(),i(r,"nanobar"),e.id&&(r.id=e.id),e.classname&&i(r,e.classname),e.target?(r.style.position="relative",e.target.insertBefore(r,e.target.firstChild)):(r.style.position="fixed",document.getElementsByTagName("body")[0].appendChild(r)),s(),t}"object"==typeof exports?module.exports=o:"function"==typeof define&&define.amd?define([],function(){return o}):e.Nanobar=o}(this),function(){"use strict";try{var e,n=document.head||document.getElementsByTagName("head")[0],i=null,o=!1,r=!1,t=!1,a=!1,s=!1,f={appID:"",appSecret:""},d=function(e){return e.toDateString()+" "+("0"+e.getHours()).slice(-2)+":"+("0"+e.getMinutes()).slice(-2)+":"+("0"+e.getSeconds()).slice(-2)},l=new function(){var e=!1,n=function(e,n,i){s?console.log(d(new Date)+" | RBW-SDK | Loader     | ["+e+"] :: "+n):console.log("%c "+d(new Date)+" | RBW-SDK | Loader     | ["+e+"] :: "+n,"color:"+{info:"black",debug:"blue",success:"green",warning:"orange",error:"red"}[i])};this.info=function(e,i){n(e,i,"info")},this.error=function(e,i){n(e,i,"error")},this.success=function(e,i){n(e,i,"success")},this.warning=function(e,i){n(e,i,"warning")},this.debug=function(i,o){e&&n(i,o,"debug")},this.setLevelToVerbose=function(n){e=n}};("Microsoft Internet Explorer"===navigator.appName||navigator.userAgent.match(/Trident/)||navigator.userAgent.match(/rv 11/))&&(window.Promise=window.ES6Promise,s=!0,l.warning("Initialize ","Internet Explorer 11 detected. You need to load ES6-shim in order to work (IE11-compat)")),(l.info("Initialize ","Starting Rainbow SDK for Web loader..."),l.info("Initialize ","---------------------------------------------"),l.info("Initialize ","Try to load needed stuff..."),new Promise(function(s,d){function c(e,i,r){return new Promise(function(t,a){try{var s=e.length,f=0,d=0;0===s?(l.debug("Loading    ","Nothing to load. Go to next step!"),t()):(l.debug("Loading    ","Preparing for loading "+s+" files..."),e.forEach(function(e){var c,g,u,p;r?(u=e,p=i,l.debug("Loading    ","Try to load script "+u),new Promise(function(e,i){try{var r=document.createElement("script");r.type="text/javascript",r.async=p,r.onerror=function(e){l.error("Loading    ","Can't load script file "+u+"(loading-error)"),i(e)},r.onload=function(){l.success("Loading    ","Loaded script file "+u),e()},n.appendChild(r);var t=u;o&&(t+="?cache="+(new Date).getTime()),r.src=t}catch(e){l.error("Loading    ","Can't load script file "+u+" (loading-error)"),i(e)}})).then(function(){f++,l.debug("Loading    ",f+" file(s) loaded"),s===f?t():s===f+d&&a()}).catch(function(e){d++,l.error("Loading    ",d+" file(s) not loaded"),s===f+d&&a(e)}):(c=e,g=i,l.debug("Loading    ","Try to load CSS "+c),new Promise(function(e,i){try{var o=document.createElement("link");o.rel="stylesheet",o.type="text/css",o.async=g,o.onerror=function(e){l.error("Loading    ","Can't load css file "+c+" (loading-error)"),i(e)},o.onload=function(){l.success("Loading    ","Loaded css file "+c),e()},n.appendChild(o),o.href=c}catch(e){l.error("Loading    ","Error when loading css file (loading-error)"),i(e)}})).then(function(){f++,l.debug("Loading    ",f+" file(s) loaded"),s===f?t():s===f+d&&a()}).catch(function(e){d++,l.error("Loading    ",d+" file(s) not loaded"),s===f+d&&a(e)})}))}catch(e){a(e)}})}function g(){return l.debug("Loading    ","Preparing for bootstrapping application..."),e=i.app.bootstrap,new Promise(function(n,i){try{angular.bootstrap(document,[e]),n()}catch(e){i(e)}});var e}function u(){return l.debug("Loading    ","Preparing initializing SDK..."),new Promise(function(e,n){window.rainbowSDK?(l.info("Information","Global window.rainbowSDK variable set"),window.rainbowSDK.setVerboseLog(a),window.rainbowSDK.useAngularEvents(t),window.rainbowSDK.setKeyFromConfig(f.appID,f.appSecret),window.rainbowSDK.hasBeenLaunchedFromConfig(!0),e()):(l.warning("No global parameter rainbowSDK (no-global)"),n())})}function p(){return l.debug("Loading    ","Preparing reading application key..."),new Promise(function(e,n){var o=i.app;0===o.key.appID.length?l.warning("Config     ","Empty property 'appID' in config file. Use default (no-appID)"):(f.appID=o.key.appID,f.appSecret=o.key.appSecret,l.info("Config     ","Use Application ID "+f.appID)),e()})}function h(n){r&&e&&e.go(n)}new Promise(function(e,n){try{var o=document.getElementsByTagName("script"),r=null;if(o)for(var t in o)if({}.hasOwnProperty.call(o,t)){var a=o[t];a.dataset&&a.dataset.main&&(r=a.dataset.main,l.info("Loading    ","Use config file "+r))}if(r){var s=new XMLHttpRequest;s.onload=function(o){200!==s.status?(l.error("Loading    ","Can't load the config file: "+s.status+" "+s.statusText+" (file-not-found)"),n(s.statusText)):(i=s.response,l.info("Loading    ","Received a config file of type... "+typeof i),"string"==typeof i&&(l.warning("Loading    ","Convert data to JSON..."),i=JSON.parse(i)),i&&function(){if(!i.hasOwnProperty("settings"))return l.error("Config     ","Missing property 'settings' in config file. (incomplete-file)"),!1;if(!i.hasOwnProperty("libraries"))return l.error("Config     ","Missing property 'libraries' in config file. (incomplete-file)"),!1;if(!i.libraries.hasOwnProperty("prerequisites"))return l.error("Config     ","Missing property 'before' in config file. (incomplete-file)"),!1;if(!i.libraries.hasOwnProperty("sdk"))return l.error("Config     ","Missing property 'sdk' in config file. (incomplete-file)"),!1;if(!i.libraries.sdk.hasOwnProperty("default"))return l.error("Config     ","Missing property 'default' in config file. (incomplete-file)"),!1;if(!i.hasOwnProperty("app"))return l.error("Config     ","Missing property 'app' in config file. (incomplete-file)"),!1;if(!i.app.hasOwnProperty("key"))return l.error("Config     ","Missing property 'key' in config file. (incomplete-file)"),!1;if(!i.app.key.hasOwnProperty("appID"))return l.error("Config     ","Missing property 'appID' in config file. (incomplete-file)"),!1;if(!i.app.key.hasOwnProperty("appSecret"))return l.error("Config     ","Missing property 'appSecret' in config file. (incomplete-file)"),!1;var e=i.libraries.sdk.default;return e in i.libraries.sdk||(l.error("Config     ","Missing property '"+e+"' in config file. (incomplete-file)"),!1)}()?(l.success("Loading    ","The config file is valid"),e()):(l.error("Loading    ","No valid config file (no-valid-file)"),n()))},s.onerror=function(e){n(e)},s.open("GET",r,!0),s.responseType="json",l.info("Loading    ","Load config file "+r),s.send()}else l.error("Loading    ","Config file can't be found. Did you forget to add the data-main attribute (file-not-found) ?"),n()}catch(e){l.info("Loading    ","Error when loading the config file (error-loading)"),console.log("ERR",e),n(e)}}).then(function(){return new Promise(function(e,n){var s=i.settings;if(void 0===s.verboseLog)l.warning("Config     ","Missing 'verboseLog' property in config file. Use default (no-verbose-log)"),l.setLevelToVerbose(!1),a=!1;else{var f=(a=s.verboseLog)?"YES":"NO";l.info("Config     ","Set verbose log "+f),l.setLevelToVerbose(a)}void 0===s.disableCache?(l.warning("Config     ","Missing 'disableCache' property in config file. Use default (use-cache)"),o=!1):(f=(o=s.disableCache)?"YES":"NO",l.info("Config     ","Force to reload script "+f)),void 0===s.enableLoader?(l.warning("Config     ","Missing 'enableLoader' property in config file. Use default (no-loader)"),r=!1):(f=(r=s.enableLoader)?"YES":"NO",l.info("Config     ","Display loader "+f)),void 0===s.useAngularEvents?(l.warning("Config     ","Missing 'useAngularEvents' property in config file. Use default (no-angular-events)"),t=!1):(f=(t=s.useAngularEvents)?"YES":"NO",l.info("Config     ","Use Angular based events "+f)),e()})}).then(function(){return r&&(e=new Nanobar).go(1),l.debug("Information","Config loaded successfully"),l.debug("Information","Parameters set"),h(10),p()}).then(function(){return l.debug("Information","Finished reading application key"),h(20),l.debug("Loading    ","Preparing for loading pre-dependencies..."),c(i.libraries.prerequisites,!1,!0)}).then(function(){return l.debug("Information","Finished loading pre-dependencies"),h(30),function(){l.debug("Loading    ","Preparing for loading framework...");var e=i.libraries.sdk.default;return c(i.libraries.sdk[e],!0,!0)}()}).then(function(){return l.debug("Information","Finished loading framework"),h(45),l.debug("Loading    ","Preparing for loading post-dependencies..."),c(i.libraries.after,!0,!0)}).then(function(){return l.debug("Information","Finished loading post-dependencies"),h(60),l.debug("Loading    ","Preparing for loading application CSS..."),c(i.app.css,!0,!1)}).then(function(){return l.debug("Information","Finished loading application CSS"),h(75),l.debug("Loading    ","Preparing for loading application files..."),c(i.app.js,!1,!0)}).then(function(){return l.debug("Information","Finished loading application"),h(90),g()}).then(function(){return l.debug("Information","Finished bootstraping application"),h(95),u()}).then(function(){l.debug("Information","Finished initializing SDK"),l.info("Initialize ","---------------------------------------------"),h(100),s()}).catch(function(e){l.info("Initialize ","---------------------------------------------"),d(e)})})).then(function(){l.info("Initialize ","Loaded!"),window.rainbowSDK.load()}).catch(function(e){l.warning("Initialize ","Something goes wrong!!! Please have a look to the logs.",e)})}catch(e){console.log("If you see that... Just go away from that code :-)",e)}}();